<div class="highlight"><pre><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=需要申请&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">oInput</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;input1&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">oT</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;t1&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">timer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="nx">oInput</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="c1">// 单次定位请求</span>
        <span class="c1">// navigator.geolocation.getCurrentPosition(function(position){</span>
        <span class="c1">//  oT.value += &#39;经度：&#39; + position.coords.longitude + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;维度：&#39; + position.coords.latitude + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;准确度：&#39; + position.coords.accuracy + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;海拔：&#39; + position.coords.altitude + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;海拔准确度：&#39; + position.coords.altitudeAcuracy + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;行进方向：&#39; + position.coords.heading + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;地面速度：&#39; + position.coords.speed + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;时间戳：&#39; + new Date(position.timestamp) + &#39;\n&#39;;</span>
        <span class="c1">// },function(err){</span>
        <span class="c1">//  // 请求失败函数</span>
        <span class="c1">//  // 失败编号： code</span>
        <span class="c1">//  // 0：不包括其他错误编号中的错误</span>
        <span class="c1">//  // 1:用户拒绝浏览器获取位置信息</span>
        <span class="c1">//  // 2:尝试获取用户信息，但失败了</span>
        <span class="c1">//  // 3:设置了timeout值，获取位置超时了</span>
        <span class="c1">//  console.log(err.code);</span>
        <span class="c1">//  },{//数据收集：json的形式</span>
        <span class="c1">//  enableHighAcuracy: true,//更精确的查找，默认false</span>
        <span class="c1">//  timeout: 5000,//获取位置允许最长时间，默认infinity</span>
        <span class="c1">//  maximumAge: 5000//位置可以缓存的最大时间，默认0</span>
        <span class="c1">// });</span>
        

        <span class="c1">// 监听位置变化，移动端使用</span>
        <span class="c1">// timer = navigator.geolocation.watchPosition(function(position){</span>
        <span class="c1">//  oT.value += &#39;经度：&#39; + position.coords.longitude + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;维度：&#39; + position.coords.latitude + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;准确度：&#39; + position.coords.accuracy + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;海拔：&#39; + position.coords.altitude + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;海拔准确度：&#39; + position.coords.altitudeAcuracy + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;行进方向：&#39; + position.coords.heading + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;地面速度：&#39; + position.coords.speed + &#39;\n&#39;;</span>
        <span class="c1">//  oT.value += &#39;时间戳：&#39; + new Date(position.timestamp) + &#39;\n&#39;;</span>
        <span class="c1">// },function(err){</span>
        <span class="c1">//  // 请求失败函数</span>
        <span class="c1">//  // 失败编号： code</span>
        <span class="c1">//  // 0：不包括其他错误编号中的错误</span>
        <span class="c1">//  // 1:用户拒绝浏览器获取位置信息</span>
        <span class="c1">//  // 2:尝试获取用户信息，但失败了</span>
        <span class="c1">//  // 3:设置了timeout值，获取位置超时了</span>
        <span class="c1">//  alert(err.code);</span>
        <span class="c1">//  navigator.geolocation.clearWatch(timer);</span>
        <span class="c1">//  },{//数据收集：json的形式</span>
        <span class="c1">//  enableHighAcuracy: true,//更精确的查找，默认false</span>
        <span class="c1">//  timeout: 5000,//获取位置允许最长时间，默认infinity</span>
        <span class="c1">//  maximumAge: 5000//位置可以缓存的最大时间，默认0</span>
        <span class="c1">//  frequency: 1000// 更新的频率</span>
        <span class="c1">// })</span>
        


        <span class="nx">navigator</span><span class="p">.</span><span class="nx">geolocation</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">position</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">position</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BMap</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;div1&quot;</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">pt</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BMap</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

            <span class="nx">map</span><span class="p">.</span><span class="nx">centerAndZoom</span><span class="p">(</span><span class="nx">pt</span><span class="p">,</span> <span class="mi">14</span><span class="p">);</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">enableScrollWheelZoom</span><span class="p">();</span>
            <span class="c1">// var marker1 = new BMap.Marker(pt);//创建标注</span>
            <span class="c1">// map.addOverlay(marker1);</span>

            <span class="kd">var</span> <span class="nx">myIcon</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BMap</span><span class="p">.</span><span class="nx">Icon</span><span class="p">(</span><span class="s2">&quot;me.JPG&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">BMap</span><span class="p">.</span><span class="nx">Size</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">30</span><span class="p">));</span>
            <span class="kd">var</span> <span class="nx">marker2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BMap</span><span class="p">.</span><span class="nx">Marker</span><span class="p">(</span><span class="nx">pt</span><span class="p">,</span> <span class="p">{</span><span class="nx">icon</span><span class="o">:</span> <span class="nx">myIcon</span><span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addOverlay</span><span class="p">(</span><span class="nx">marker2</span><span class="p">);</span>

            <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">width</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>  <span class="c1">//信息窗口宽度</span>
                <span class="nx">height</span><span class="o">:</span> <span class="mi">60</span><span class="p">,</span>  <span class="c1">//信息窗口高度</span>
                <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;我住的地方&quot;</span> <span class="c1">//信息窗口标题</span>
            <span class="p">}</span>
            <span class="kd">var</span> <span class="nx">infoWindow</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BMap</span><span class="p">.</span><span class="nx">InfoWindow</span><span class="p">(</span><span class="s2">&quot;我的大本营&quot;</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>  <span class="c1">//创建信息窗口对象</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">openInfoWindow</span><span class="p">(</span><span class="nx">infoWindow</span><span class="p">,</span> <span class="nx">pt</span><span class="p">);</span> <span class="c1">//开启窗口信息</span>
        <span class="p">},</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
        <span class="p">})</span> 
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="err">/script&gt;</span>
</pre></div>